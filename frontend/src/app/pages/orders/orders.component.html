
<div class="container" >
    <h1 class="my-4">Novo Pedido</h1>
    <div class="row justify-content-around ">
      <div class="col-7 products-container p-5">
        <div class="alert alert-info" role="alert" *ngIf="orderObserver.productsOrdered.length<=0">
          Ainda não há produtos adicionados no pedido. Clique no botão abaixo para adicionar.
          
        </div>
        <div class="row justify-content-between" *ngFor="let products of orderObserver.productsOrdered">
          <hr>
          <div class="col">
            <div class="row products-name">
              <p><strong>{{products.product.name}}</strong></p>
            </div>
            <div class="row">
              <span 
                class="badge text-wrap"
                style="width: 9rem; font-weight: 700;font-size:14px"
                [ngClass]="products.product.stockQty>50 ? 'inStock' : 'outStock' "
                >
                Em estoque: {{products.product.stockQty}}
              </span>
            </div>
            <div class="row">
              <div class="col">
                <button type="button" class="plus-button btn" (click)="minusQty(products.product.name, products.qty)">-</button> {{products.qty}} <button type="button"
                  class="plus-button btn" (click)="plusQty(products.product.name, products.qty)">+</button>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="row">
              <div class="col">
                <p class="text-end teste">Subtotal <strong>{{(products.qty * products.product.value | currency)}}</strong> </p>
              </div>
            </div>
            <div class="row">
              <br>
            </div>
            <div class="row">
              <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button type="button" class="btn btn-info me-md-2">
                  <fa-icon class="icon" [icon]="faInfo" size="lg"></fa-icon> ver
                </button>
                <button type="button" class="btn btn-danger" (click)="delete(products.product)">
                  <fa-icon class="icon" [icon]="faTrashCan" size="lg"></fa-icon> remover
                </button>
              </div>
            </div>
          </div>
          <hr class="mt-2">
        </div>
        <div class="d-grid gap-2 col-6 mx-auto">
          <button type="button" class="btn btn-primary" (click)="openDialog()">
            <fa-icon class="icon" [icon]="faCirclePlus" size="lg"></fa-icon>
            Adicionar produto
          </button>
        </div>
      </div>
  
      <div class="col-4 details-container rounded p-5" >
        <h3>Detalhes do pedido</h3>
        <hr>
        <p class="text-end"><strong>Data: </strong>{{date | date:'d MMMM , y HH:mm'}}</p>
        <div class="d-grid gap-2 col-6 mx-auto">
          <button type="button" class="btn btn-primary " (click)="openClient()" *ngIf="!orderObserver.orderClient.name">
            <fa-icon class="icon" [icon]="faCirclePlus" size="lg"></fa-icon>
            Adicionar Cliente
          </button>
        </div>
        <div class="row gx-5" *ngIf="orderObserver.profileMock" (click)="openClient()">
          <h5>Cliente</h5>
          <div class="col-2 costumerProfile border justify-content-center d-flex align-items-center" >
            {{orderObserver.profileMock}}
          </div>
          <div class="col-10">
            <div class="row fw-bold">{{orderObserver.orderClient.name}}</div>
            <div class="row text-muted">{{orderObserver.orderClient.email}}</div>
          </div>
        </div>
        <h5 class="mt-3 mb-1">Produtos:</h5>
        <p class="mt-3" *ngFor="let products of orderObserver.productsOrdered">{{products.product.name}} x {{products.qty}} <strong>{{products.product.value | currency}}</strong></p>
        <div class="row mt-2" *ngIf="orderObserver.productsOrdered.length>0">
          <div class="col-6">
            <h5>Total</h5>
          </div>
          <div class="col-6">
            <p class="text-end "><strong>{{orderObserver.sumValue() | currency}}</strong></p>
          </div>
          <button class="btn btn-primary" type="button" (click)="save()">Confirmar Pedido</button>
        </div>
        
      </div>
      <ng-template #elseBlock>Content to render when condition is false.</ng-template>
    </div>

    <!-- <p *ngIf="orderObserver.orderClient.name">Cliente: {{orderObserver.orderClient.name}}</p> -->
